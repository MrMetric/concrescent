<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title><%= htmlWebpackPlugin.options.title %> Loading...</title>
</head>

<body>
  <noscript>
    <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
  </noscript>
  <div id="app"></div>
  <!-- built files will be auto injected -->
  <script>
    //Did we load?
    window.onload = function() {
      var app = document.getElementById("app");
      if (typeof app.dataset.app == "undefined") {
        app.innerHTML = "Site has been updated, Please wait for refresh and try again.";
        //Check if we've attempted to reload
        if(window.location.hash.indexOf('attemptedReload') == -1){

            setTimeout(() =>
            {
                 window.location.replace(window.location.pathname + (window.location.hash || '?') + '&attemptedReload' );
                 window.location.reload();
            }, 5000);
        } else {
            app.innerHTML += " Alternatively, your browser might be out of date?";
        }

      }
    }
  </script>
</body>

</html>
